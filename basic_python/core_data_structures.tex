%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Tutorial slides on Python.
%
% Author: FOSSEE
% Copyright (c) 2009-2017, FOSSEE, IIT Bombay
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[14pt,compress]{beamer}
\input{macros.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Title page
\title[Data structures]{Python language: Core data structures}

\author[FOSSEE Team] {The FOSSEE Group}

\institute[IIT Bombay] {Department of Aerospace Engineering\\IIT Bombay}
\date[] {Mumbai, India}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DOCUMENT STARTS
\begin{document}

\begin{frame}
  \titlepage
\end{frame}

\begin{frame}
  \frametitle{Outline}
  \tableofcontents
  % You might wish to add the option [pausesections]
\end{frame}

\section{Data structures}
\subsection{Lists}
\begin{frame}[fragile]
  \frametitle{Lists}
\begin{block}{We already know that}
  \begin{lstlisting}
num = [1, 2, 3, 4]
  \end{lstlisting}
is a list
\end{block}
\pause
\begin{itemize}
\item Lists can contain different types
\item including nested lists
\end{itemize}
\begin{lstlisting}
x = ['apple', 1, 'banana', 2.5,
     'shirt', [1,2,3]]
len(x)
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Lists: methods}
  \begin{lstlisting}
In []: num = [9, 8, 2, 3, 7]

In []: num + [4, 5, 6]
Out[]: [9, 8, 2, 3, 7, 4, 5, 6]

In []: num.append([4, 5, 6])

In []: num
Out[]: [9, 8, 2, 3, 7, [4, 5, 6]]
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Lists: methods}
  \begin{lstlisting}
In []: num = [9, 8, 2, 3, 7]

In []: num.extend([4, 5, 6])
In []: num
Out[]: [9, 8, 2, 3, 7, 4, 5, 6]

In []: num.reverse()
In []: num
Out[]: [6, 5, 4, 7, 3, 2, 8, 9]

In []: num.remove(6)
In []: num
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Lists: methods}
  \begin{lstlisting}
In []: num = [9, 8, 2, 3, 1, 2, 3, 4]
In []: num.count(2)
Out[]: 2

In []: num.index(2)
Out[]: 2

In []: num.pop()
4
In []: num
[9, 8, 2, 3, 1, 2, 3]
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Removing elements}
\begin{itemize}
  \item Elements can be removed based on their index OR
  \item based on the value of the element
  \end{itemize}
  \begin{lstlisting}
   In []: del num[1]

   In []: num.remove(3)
  \end{lstlisting}
  \begin{itemize}
  \item \alert{When removing by value, first element is removed}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Sorting}
  \begin{lstlisting}
  In []: a = [5, 1, 6, 7, 7, 10]
  In []: a.sort()
  In []: a
  \end{lstlisting}
  \begin{itemize}
  \item \typ{sort} method sorts the list in-place
  \item Use \typ{sorted} if you require a new list
  \item Pass \typ{reverse=True} to reverse the ordering
  \end{itemize}
  \begin{lstlisting}
  In []: a = [5, 1, 6, 7, 7, 10]
  In []: sorted(a, reverse=True)
  In []: a
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
\frametitle{List containership}
\emphbar{Recall \typ{num} is \typ{[9, 8, 2, 3, 7]}}
\begin{lstlisting}
In []: 4 in num
Out[]: False

In []: b = 8
In []: b in num
Out[]: True

In []: b not in num
Out[]: False
\end{lstlisting}
\end{frame}

\subsection{Tuples}
\begin{frame}[fragile]
\frametitle{Tuples: Immutable sequence}
\begin{lstlisting}
In []: x = 1, 2, 3
In []: x
(1, 2, 3)

In []: t = (1, 2, 3, 4, 5, 6, 7, 8)
In []: t[0] + t[3] + t[-1]
Out[]: 13

In []: t[4] = 7
\end{lstlisting}
\pause
\begin{block}{Note:}
\begin{itemize}
  \item Tuples are immutable - cannot be changed
\end{itemize}
\end{block}

\end{frame}

\begin{frame}[fragile]
  \frametitle{Tuple packing and expansion}
  Try these:
\begin{lstlisting}
In []: a, b = 1, 2

In []: a, b, c = 1, 2, 3

In []: a, b = 1, 2, 3

In []: a, = [1]
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Swapping values}
  \vspace*{-1em}
  \begin{lstlisting}
  In[]: a, b = 5, 7

  In[]: temp = a
  In[]: a = b
  In[]: b = temp
  \end{lstlisting}
  \begin{itemize}
  \item Here's the Pythonic way of doing it
  \end{itemize}
  \begin{lstlisting}
  In[]: a, b = b, a
  \end{lstlisting}
  \begin{itemize}
  \item The variables can be of different data-types
  \end{itemize}
  \begin{lstlisting}
  In[]: a = 2.5
  In[]: b = "hello"
  In[]: a, b = b, a
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{\typ{tuple, list} functions}
  Try these:
\begin{lstlisting}
In []: x = 1,2,3

In []: list(x)
Out[]: [1, 2, 3]

In []: tuple(list(x))
Out[]: (1, 2, 3)

In []: tuple('hello')
\end{lstlisting}
\end{frame}

\begin{frame}
  \frametitle{Slicing}
  \begin{itemize}
  \item Slicing works the same way for all sequence types
  \item Indices also work the same way
  \item Lists, tuples, and strings
  \item \alert{\typ{sequence[initial:final:step]}}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Slicing \& Striding examples}
  \begin{lstlisting}
In[]: primes = [2, 3, 5, 7, 11, 13, 17]
In[]: primes[2:6]
In[]: primes[:4]

In[]: num = list(range(14))
In[]: num[1:10:2]
In[]: num[:10]
In[]: num[10:]
In[]: num[::2]
In[]: num[::-1]
  \end{lstlisting}
\end{frame}

\begin{frame}
  \frametitle{Problem - Day of the Week?}
  \begin{itemize}
  \item Strings have methods to manipulate them
  \end{itemize}
  \begin{block}{Problem}
    Given a list, \texttt{week}, containing names of the days of the
    week and a string \texttt{s}, check if the string is a day of the
    week. We should be able to check for any of the forms like,
    \emph{sat, Sat, SAT}
  \end{block}
  \begin{itemize}
  \item Get the first 3 characters of the string
  \item Convert it all to lower case
  \item Check for existence in the list, \texttt{week}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Solution - Day of the Week?}
  \small
\begin{lstlisting}
week = 'mon tue wed thu fri sat sun'.split()
s = 'Sunday'
s.lower()[:3] in week
\end{lstlisting}
  OR
\begin{lstlisting}
s[:3].lower() in week
\end{lstlisting}
\end{frame}

\subsection{Dictionaries}

\begin{frame}[fragile]
  \frametitle{Dictionaries: Introduction}
  \begin{itemize}
  \item Lists index using integers; recall that :\\
    \vspace*{1em}
      If \typ{p = [2, 3, 5, 7]}\\
      \typ{p[1]} is equal to \typ{3}
      \vspace*{2em}
    \item Dictionaries index not just with integers!
    \item Following examples are for string indices
    \item Will also work for integers, floats, tuples, and others
    \item \alert{No ordering of keys!}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Dictionaries \ldots}
\begin{lstlisting}
In []: mtdict = {}
In []: d = {'png' : 'image file',
      'txt' : 'text file',
      'py' : 'python code',
      'java': 'bad code',
      'cpp': 'complex code'}

In []: d['txt']
Out[]: 'text file'
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Dictionaries \ldots}
  \begin{lstlisting}
In []: 'py' in d
Out[]: True

In []: 'jpg' in d
Out[]: False
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Dictionaries \ldots}
  \begin{small}
    \begin{lstlisting}
In []: list(d.keys())
Out[]: ['cpp', 'py', 'txt', 'java', 'png']

In []: list(d.values())
Out[]: ['complex code', 'python code',
        'text file', 'bad code',
        'image file']
    \end{lstlisting}
  \end{small}
%%  \inctime{10}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Inserting elements}
  \emphbar{\alert{\typ{d[key] = value}}}
  \begin{lstlisting}
In []: d['bin'] = 'binary file'
In []: d
Out[]:
{'bin': 'binary file',
 'cpp': 'complex code',
 'java': 'bad code',
 'png': 'image file',
 'py': 'python code',
 'txt': 'text file'}
  \end{lstlisting}
  \emphbar{\alert{Duplicate keys are overwritten!}}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Adding \& Removing Elements}
  \begin{itemize}
  \item Adding a new key-value pair
  \end{itemize}
  \begin{lstlisting}
   In[]: d['c++'] = 'C++ code'
   In[]: d
  \end{lstlisting}
  \begin{itemize}
  \item Deleting a key-value pair
  \end{itemize}
  \begin{lstlisting}
   In[]: del d['java']
   In[]: d
  \end{lstlisting}
  \begin{itemize}
  \item Assigning to existing key, modifies the value
  \end{itemize}
  \begin{lstlisting}
   In[]: d['cpp'] = 'C++ source code'
   In[]: d
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Dictionaries:  methods}
\begin{lstlisting}
In []: d.keys()
In []: d.values()
In []: d.get('bin')
Out[]: 'binary file'
In []: d.get('junk')  # No error!

In []: d.update({'bin': 'Binary file',
.....:           'exe': 'executable'})
In []: d.clear()
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Dictionaries: containership}
  \begin{lstlisting}
In []: 'bin' in d
Out[]: True

In []: 'hs' in d
Out[]: False
  \end{lstlisting}
  \begin{block}{Note}
    \begin{itemize}
      \item We can check for the containership of keys only
      \item Not values
    \end{itemize}
  \end{block}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Dictionaries:  iteration}
  \begin{lstlisting}
In []: for v in d:
.....:     print(v)
.....:

In []: for v in d.values():
.....:     print(v)
.....:

In []: for k, v in d.items():
.....:     print(k, v)
.....:
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{\typ{dict} built-in}
Like \typ{list, tuple} can also create dicts like so:
\begin{lstlisting}
In []: d = dict(png='image file',
.....:          txt='text file',
.....:          py='python code')
\end{lstlisting}
\begin{itemize}
\item Check more of the dictionary methods yourself
\end{itemize}
\end{frame}

\begin{frame} {Problem 2.1}

  You are given date strings of the form ``29 Jul, 2009'', or ``4 January
  2008''. In other words a number, a string and another number, with a comma
  sometimes separating the items.

  Write a program that takes such a string as input and prints a tuple (yyyy,
  mm, dd) where all three elements are ints.
\end{frame}

\begin{frame}[fragile]
  \frametitle{Some hints}
  \begin{itemize}
  \item Simplify the problem
  \item Try to explain how someone can do it
    \vspace*{2em}

  \item Replace ',' with space
  \item \typ{string.split()} method is your friend
  \item Need a mapping from month (string) to a number: use a dict
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Partial solution}
\begin{lstlisting}
month2mm = {'jan': 1, 'feb': 2, #...
           }
date = input('Enter a date string: ')
date = date.replace(',', ' ')
day, month, year = date.split()
dd, yyyy = int(day), int(year)
mon = month[:3].lower()
mm = month2mm[mon]
print((yyyy, mm, dd))
\end{lstlisting}
\end{frame}

\subsection{Sets}
\begin{frame}[fragile]
  \frametitle{Sets}
  \begin{itemize}
  \item Conceptually identical to the sets in mathematics
  \item Simplest container, mutable
  \item No ordering, no duplicates
  \item usual suspects: union, intersection, subset \ldots
  \item >, >=, <, <=, in, \ldots
  \end{itemize}
  \begin{lstlisting}
  In[]: a_list = [1, 2, 1, 4, 5, 6, 2]
  In[]: a = set(a_list)
  In[]: a
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile,plain]
  \frametitle{Operations on Sets}
  \begin{lstlisting}
  In []: f10 = set([1, 2, 3, 5, 8])
  In []: p10 = set([2, 3, 5, 7])
  \end{lstlisting}
  \begin{itemize}
  \item Mathematical operations can be performed on sets
  \end{itemize}
  \begin{itemize}
  \item Union
    \begin{lstlisting}
    In []: f10 | p10
    \end{lstlisting}
  \item Intersection
    \begin{lstlisting}
    In []: f10 & p10
    \end{lstlisting}
  \item Difference
    \begin{lstlisting}
    In []: f10 - p10
    \end{lstlisting}
  \item Symmetric Difference
\begin{lstlisting}
    In []: f10 ^ p10
    \end{lstlisting}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Sub-sets}
  \begin{itemize}
  \item Proper Subset
    \begin{lstlisting}
    In[]: b = set([1, 2])
    In[]: b < f10
    \end{lstlisting}
  \item Subsets
    \begin{lstlisting}
    In[]: f10 <= f10
    \end{lstlisting}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Elements of sets}
  \begin{itemize}
  \item Containership
    \begin{lstlisting}
    In[]: 1 in f10
    In[]: 4 in f10
    \end{lstlisting}
  \item Iterating over elements
    \begin{lstlisting}
    In[]: for i in f10:
    ....:      print(i)
    ....:
    \end{lstlisting}
  \item Subsets
    \begin{lstlisting}
    In[]: f10 <= f10
    \end{lstlisting}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Problem 2.2}
  Given a dictionary of the names of students and their marks,

  \begin{enumerate}
  \item identify how many duplicate marks are there?
  \item and what are these duplicate marks?
  \end{enumerate}

\end{frame}

\begin{frame}
  \frametitle{Hints}
  \begin{itemize}
  \item Use a set to find the unique marks: first part
  \item Second part can be done in a few different ways
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Possible solution}
\begin{lstlisting}
students = {'x': 60, 'y': 60, 'z': 55}
all_marks = list(students.values())
unique = set(all_marks)
n_dups = len(all_marks) - len(unique)
print(n_dups, 'duplicates')

# Part 2
for i in unique:
    all_marks.remove(i)
print('Duplicates are', set(all_marks))
\end{lstlisting}
\end{frame}

\begin{frame}
  \frametitle{What did we learn?}
  \begin{itemize}
    \item Core Python data structures:
    \begin{itemize}
      \item Lists
      \item Tuples
      \item Dictionaries
      \item Sets
    \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Homework}

  \begin{itemize}
  \item Explore all the methods of the various data structures you have seen
    so far.
  \item Read the documentation for each of these methods.
  \item Solve all problems discussed
  \end{itemize}
\end{frame}

\end{document}

%% Questions for Quiz %%
%% ------------------ %%

\begin{frame}
    \frametitle{\incqno}
  How do you find the presence of an element \emph{x} in the list \emph{a}?
\end{frame}


\begin{frame}[fragile]
    \frametitle{\incqno}
  \begin{lstlisting}
In []: set([1, 2, 8, 2, 13, 8, 9])
  \end{lstlisting}
  What is the output?
\end{frame}

\begin{frame}[fragile]
    \frametitle{\incqno}
  \begin{lstlisting}
In []: a = {'a': 1, 'b': 2}
In []: a['a'] = 10
In []: print(a)
  \end{lstlisting}
  What is the output?
\end{frame}

\begin{frame}[fragile]
    \frametitle{\incqno}
  \begin{lstlisting}
In []: for i in range(3, 10, 2):
  ...:     print(i)
  \end{lstlisting}
  What is the output?
\end{frame}

\begin{frame}[fragile]
    \frametitle{\incqno}
  \begin{lstlisting}
In []: a = [1, 2, 3]
In []: a.extend([5, 6])
  \end{lstlisting}
  What is the value of a?
\end{frame}

\begin{frame}[fragile]
    \frametitle{\incqno}
  \begin{lstlisting}
In []: a = (1, 2, 3)
In []: a[1] = 10
  \end{lstlisting}
  What is the result?
\end{frame}

\begin{frame}[fragile]
    \frametitle{\incqno}
  \begin{lstlisting}
def func(x, y=10):
    print x+1, y+10

func(1)

  \end{lstlisting}
  What is the output?
\end{frame}
